





<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Page 4 &mdash; Whitewashing</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3.1b',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/disqus.js"></script>
    <link rel="shortcut icon" href="_static/tinkerer.ico"/>
    
    <link rel="top" title="Whitewashing" href="index.html" />
    <link rel="next" title="Older" href="page4.html" />
    <link rel="prev" title="Newer" href="page2.html" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.html"> 
  </head>
  <body>
<div class="container">
    <div id="header" class="span-8">
        <a href="index.html"><img src="_static/logo.jpg" alt="Whitewashing.de" /></a>
    </div>
    <div class="span-16 last" id="about">
        <p>Whitewashing is the blog of Benjamin Eberlei and covers topics in computer science, databases
        and web-development and other topics of interest.</p>

        <p class="buttons">
            <a href="http://www.twitter.com/beberlei"><img src="http://twitter-badges.s3.amazonaws.com/follow_me-a.png" alt="Follow beberlei on Twitter"/></a>
            <a href="http://www.whitewashing.de/rss.xml"><img src="_static/rss.jpg" alt="Subscribe to RSS" /></a>
        </p>
    </div>
</div>



    <div class="document">
<div class="container">
    
    <div class="span-24 content">
      <div>
        <div>
          <div id="page3">
            
            
    
    <div class="related">
        <ul>
            <li>
                 &laquo; <a href="page2.html">Newer</a>
            </li>
            <li class="right">
                <a href="page4.html">Older</a> &raquo; 
            </li>
        </ul>
    </div>
        
        <div class="timestamp postmeta">
            <span>February 12, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="pdt-back-to-easyeclipse-with-php-extension">
<a href="2008/02/12/pdt-back-to-easyeclipse-with-php-extension.html"><h1>PDT: Back to easyeclipse with PHP extension</h1></a>
<p>I am disappointed by <a class="reference external" href="http://www.eclipse.org/pdt/">PDT</a> for Eclipse.
The current version strikes my rather old machine with “just” 512mb to
death. Building projects is not possible even when assigning eclipse all
my available memory, because of an Java Heap Error (<a class="reference external" href="http://blog.wolff-hamburg.de/archives/20-Migrating-to-PDT.html">See this blog
post</a>).
This effectivly hinders you to use all the completion and hint features,
because PDT does not know about any functions, classes and their phpdoc
descriptions.</p>
<p>PDT is also missing some very important features. Marking all occurances
of a function, class, constant or variable on click for example. PHP
Errors and Warnings are display in a way so that you won’t find them and
if you do, you won’t understand what they mean.</p>
<p>So I am going back to my easyeclipse with php combination, which always
worked well, the only problem being that it is no longer under active
development. At least it has all the features I need for now.</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/02/12/pdt-back-to-easyeclipse-with-php-extension.html#disqus_thread" data-disqus-identifier="2008/02/12/pdt-back-to-easyeclipse-with-php-extension">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>May 25, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="introducing-zend-controller-scaffolding">
<a href="2008/05/25/introducing-zend-controller-scaffolding.html"><h1>Introducing: Zend Controller Scaffolding</h1></a>
<p>In the last couple of weeks I <a class="reference external" href="http://codecaine.co.za/posts/form-generation-with-zend-form-part-2/">came across the
idea</a>
of building a little component for scaffolding in Zend Framework. After
playing around with this idea a little I came up with an
Zend_Controller_Scaffolding object, which extends the
Zend_Controller_Action object.</p>
<p>It takes any Zend_Db_Table_Abstract object and generates create and
update forms using Zend_Form and displays them in the Controller. The
component is very easy to use, as this example shows:</p>
<blockquote>
<div><div class="highlight-python"><pre>class SomeController extends WW_Controller_Scaffolding {
    public function init() {
        $this-&gt;setScaffolding(new ZendDbTableModel(), $options);
    }
}</pre>
</div>
</div></blockquote>
<p>You now have access to the following actions of the controller:
some/create some/edit some/delete and some/index (some/list). They
handle all your model editing dreams.</p>
<p>All you have to own is the WW_Controller_Scaffolding Library Class and
a folder of scaffolding view templates both of which are <a class="reference external" href="http://www.beberlei.de/sources/zend_controller_scaffolding-0.5.5.tar.gz">bundled in an
archive you can
download</a>.</p>
<p><strong>Download</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://www.beberlei.de/sources/zend_controller_scaffolding-0.5.5.tar.gz">Download Version
0.5.5</a></li>
</ul>
<p><strong>Changes</strong></p>
<ul class="simple">
<li>0.5.5: Put Component into own Namespace (WW = Whitewashing). Make it
possible to hide fields in the list via the options. Allow to specify
scaffolding view scripts folder via options.</li>
</ul>
<p><strong>Install &amp; Usage</strong></p>
<blockquote>
<div><div class="highlight-python"><pre>Untar the two folders include/ and views/ into your
Zend Framework project application directory.

Make sure the include folder is in your Zend_Loader
include path or move the Scaffolding.php so that it
is placed in your library include path.

Define each Controller that should be a Scaffolding Interface
as:

class SomeController extends WW_Controller_Scaffolding {
    public function init() {
        $this-&gt;setScaffolding(new ZendDbTableModel(), $options);
    }
}

Where $options is an array or Zend_Config object with any of the following keys:

  'allow_edit_primary_key' True/false - Wheater the form allows you to set the
                          Primary Key fields or not

 'field_names' an Array of the Database Tables field names mapped to Label Names

 'hide_list_fields' Array of database table field names that should not be displayed in the list overview.

 'checkbox' an Array of Database Table field names that should be represented
            as Checkbox. Useful for TINYINT(1) fields that represent boolean decisions.

 'view_folder' Sometimes you want to use different views for scaffolding in one project. Use
               this variable and copy the scaffolding folder for each component you want to
               change the view basics for.</pre>
</div>
</div></blockquote>
<p><strong>Todos &amp; Problems:</strong></p>
<ul class="simple">
<li>Many To Many Relationsships are not implemented yet (Using
MultiSelec).</li>
<li>Compound Keys are probably not working correctly</li>
<li>Relationsships on non-primary key fields probably don’t work as
expected</li>
<li>Relationsships with lots of data are not scaled down for easy
administration.</li>
</ul>
<p>Please report any bugs and feature requests or recommodations to
<strong>kontakt at beberlei dot de</strong>.</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/05/25/introducing-zend-controller-scaffolding.html#disqus_thread" data-disqus-identifier="2008/05/25/introducing-zend-controller-scaffolding">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>May 18, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="my-2-cents-on-zend-search-lucene-update-problems">
<a href="2008/05/18/my-2-cents-on-zend-search-lucene-update-problems.html"><h1>My 2 cents on Zend_Search_Lucene Update Problems</h1></a>
<p><a class="reference external" href="http://framework.zend.com">Zend_Search_Lucene</a> (or Lucene in
general) does not support an update statement, therefore we must check
via find() if a specific article that should be updated already exists.</p>
<p>Numerous solutions exist for this problem (<a class="reference external" href="http://devzone.zend.com/content/zendcon_07_slides/Evron_Shahar_Indexing_With_Zend_Search_Lucene-ZendCon07.pdf">for example this PDF
Tutorial by a Zend
Programmer</a>).
Mine looks as follows. The first thing is to Set an Analyzer other from
the default one. The Default Analyzer only looks at letters, not at
numbers.</p>
<blockquote>
<div><div class="highlight-python"><pre>Zend_Search_Lucene_Analysis_Analyzer::setDefault(new
    Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8Num_CaseInsensitive()
);
$index = Zend_Search_Lucene::open('/path/to/index/directory');</pre>
</div>
</div></blockquote>
<p>We can now save an identifier containing letters and numbers, for
example the md5 string of the Article Database ID.</p>
<blockquote>
<div><div class="highlight-python"><pre>$doc = new Zend_Search_Lucene_Document();
$field = Zend_Search_Lucene_Field::Keyword('id', md5($data['id']));
$doc-&gt;addField($field);
$index-&gt;addDocument($doc);</pre>
</div>
</div></blockquote>
<p>Before updating an entry you have to delete any entry that has been
indexed before:</p>
<blockquote>
<div><div class="highlight-python"><pre>$hits = $index-&gt;find('id:'.md5($articleID));
foreach($hits AS $hit) {
    $index-&gt;delete($hit-&gt;id);
}</pre>
</div>
</div></blockquote>
<p>The <a class="reference external" href="http://devzone.zend.com/content/zendcon_07_slides/Evron_Shahar_Indexing_With_Zend_Search_Lucene-ZendCon07.pdf">Tutorial Talk on Search
Lucene</a>
(given abote) uses an extended version of this delete routine snippet
that also checks if an article is up to date and does not have to be
reindexed and deletes multiple entries of one article.</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/05/18/my-2-cents-on-zend-search-lucene-update-problems.html#disqus_thread" data-disqus-identifier="2008/05/18/my-2-cents-on-zend-search-lucene-update-problems">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>May 17, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="integrated-zend-layout-into-this-blog">
<a href="2008/05/17/integrated-zend-layout-into-this-blog.html"><h1>Integrated Zend_Layout into this blog</h1></a>
<p>I finished with integrating Zend_Layout into this blog software today.
At first I thought it is quite hard to use especially if you want to
integrate dynamic navigational contents depending on the current
module/controller/action setup. But I came up with a combination of
actionStack and Named Response Sections as <a class="reference external" href="http://framework.zend.com/manual/en/zend.layout.quickstart.html#zend.layout.quickstart.mvc">described in the ZF
Documentation of the Layout
component</a>,
which is quite easy to understand, use and extend.</p>
<p>At each of the major Controllers I put different actions from a specific
Navigation Controller on the
<a class="reference external" href="http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.actionstack">ActionStack</a>
(mostly global per Controller using the init() class method).</p>
<p>A typical controller looks like this:</p>
<blockquote>
<div><div class="highlight-python"><pre>class BlogController extends Zend_Controller_Action
{
    public function init()
    {
        $this-&gt;_helper-&gt;actionStack('tagcloud', 'Navigation');
        $this-&gt;_helper-&gt;actionStack('userinfo', 'Navigation');
    }
}</pre>
</div>
</div></blockquote>
<p>The NavigationController looks like this:</p>
<blockquote>
<div><div class="highlight-python"><pre>class NavigationController extends Zend_Controller_Action
{
    public function tagcloudAction()
    {
        // Do not render the content of this action to the default output.
        $this-&gt;getHelper(&quot;ViewRenderer&quot;)-&gt;setNoRender();

        [...]

        // Append content to secondaryNavigation named response section
        $this-&gt;getResponse()-&gt;append('secondaryNavigation', $this-&gt;view-&gt;render('navigation/tagcloud.phtml'));
    }
}</pre>
</div>
</div></blockquote>
<p>The layout.pthml then just calls certain named sections, for example &lt;=?
$this-&gt;layout()-&gt;secondaryNavigation; ?&gt;</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/05/17/integrated-zend-layout-into-this-blog.html#disqus_thread" data-disqus-identifier="2008/05/17/integrated-zend-layout-into-this-blog">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>May 17, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="using-zend-http-client-to-ping-technorati">
<a href="2008/05/17/using-zend-http-client-to-ping-technorati.html"><h1>Using Zend_Http_Client to Ping Technorati</h1></a>
<p>Send a ping to Technorati manually is a pain in the ass. Writing a
little Method that handles this functionality for your own blog software
is quite easy. Call the following method after you created or updated a
post of yours:</p>
<blockquote>
<div><div class="highlight-python"><pre>private function _pingTechnorati()
{
    $xml = $this-&gt;view-&gt;render('ping_technorati.phtml');

    $httpclient = new Zend_Http_Client('http://rpc.technorati.com/rpc/ping');
            $httpclient-&gt;setHeaders('User-Agent', 'PHP/Zend Framework/Zend_Http');

    $httpclient-&gt;setRawData($xml, 'text/xml')-&gt;request('POST');

    $response = $httpclient-&gt;request();

    if($response-&gt;isSuccessful() === true) {
        return true;
    } else {
        return false;
    }
}</pre>
</div>
</div></blockquote>
<p>You also need a little view in XML format like it is described in the
<a class="reference external" href="http://technorati.com/developers/ping/">Technorati Ping Configuration
Guide</a> and ready to go you
are!</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/05/17/using-zend-http-client-to-ping-technorati.html#disqus_thread" data-disqus-identifier="2008/05/17/using-zend-http-client-to-ping-technorati">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>May 07, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="zend-form-rapid-development-plugin-for-eclipse">
<a href="2008/05/07/zend-form-rapid-development-plugin-for-eclipse.html"><h1>Zend_Form - Rapid Development Plugin for Eclipse?</h1></a>
<p>I found some time in the last weeks to reconsider <a class="reference external" href="http://framework.zend.com">Zend
Framework</a>, this time in the 1.5 version,
for this blog software and rewrote all Forms using the new Zend_Form
component. I have to say, i love it. Its very easy using the already
existing Zend_Validate and Zend_Filter components as input for the
generated form fields. Another plus is the handling of errors in input
and re-entering/displaying text.</p>
<p>There is also a neat feature of the Zend_Form component, which allows
to <a class="reference external" href="http://framework.zend.com/manual/en/zend.form.quickstart.html#zend.form.quickstart.config">generate complete forms by passing an appropriatly formatted
Zend_Config_Ini object to the Zend_Form
Constructor</a>.
So my idea was, why not program an Eclipse Plugin allowing to rapidly
generate and edit forms using a point-and-click plugin window approach,
which would ultimatly generate your Form INI code.</p>
<p>This might have been a great <a class="reference external" href="http://code.google.com/soc/">Google Summer of Code
idea</a> for the Eclipse Foundation (since
Zend is not taking part).</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/05/07/zend-form-rapid-development-plugin-for-eclipse.html#disqus_thread" data-disqus-identifier="2008/05/07/zend-form-rapid-development-plugin-for-eclipse">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>June 30, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="implementing-zend-auth-acl-and-caching">
<a href="2008/06/30/implementing-zend-auth-acl-and-caching.html"><h1>Implementing Zend Auth, Acl and Caching</h1></a>
<p>I managed to work a bit on the blog, enabling me to have new instance in
the series, How to refactor and extend your own blog software using
<a class="reference external" href="http://framework.zend.com">Zend Framework</a>. This time: Implementing
meaningful Auth and ACL mechanisms and <a class="reference external" href="http://www.whitewashing.de/blog/articles/41">fixing view
caching</a>, which did not
work in its original implementation due to different users groups
sharing the same cached views.</p>
<p>In the last days I came across two in depth tutorials on Zend_Acl and
Zend_Auth integration to MVC. Most people propably saw the DevZone
article “<a class="reference external" href="http://devzone.zend.com/article/3509-Zend_Acl-and-MVC-Integration-Part-I-Basic-Use">Zend_Acl and MVC Integration (part
1)</a>”
by Aldemar Bernal on the Frameworks Frontpage. Another good article was
written by Frank Ruske in the latest german <a class="reference external" href="http://www.phpmagazin.de">PHP
Magazin</a> (<a class="reference external" href="http://it-republik.de/zonen/magazine/ausgaben/psfile/source_file/14/Seite_80__482a98c572a5c.zip">Zipped Source Code of the
Example</a>).
I took the best ideas of both articles and merged them into the existing
components of my blog.</p>
<p>This now enables me to cache the site depending on the Auth status of
the page user agent. The blog is now caching all views that are
generated for guest users. Since there is no “registered” or “member”
account yet, this means the blogs content is cached and served from
cache for everyone except me when I am logged in. To get this work I
added some simple additional check in <a class="reference external" href="http://devzone.zend.com/article/3372-Front-Controller-Plugins-in-Zend-Framework">Matthews Cache View Controller
Plugin</a>:</p>
<blockquote>
<div><div class="highlight-python"><pre>public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)
{
    $auth = Zend_Auth::getInstance();
    if($auth-&gt;hasIdentity()) {
        self::$doNotCache = true;
        return;
    }
    [..]
}</pre>
</div>
</div></blockquote>
<p>This prevents caching for registered identities.</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/06/30/implementing-zend-auth-acl-and-caching.html#disqus_thread" data-disqus-identifier="2008/06/30/implementing-zend-auth-acl-and-caching">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>June 14, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="exim4-and-virtual-users-forward-files">
<a href="2008/06/14/exim4-and-virtual-users-forward-files.html"><h1>Exim4 and Virtual Users .forward Files</h1></a>
<p>Some days ago I began to wonder why some mails in mail account were
filtered by Exims .forward file why some are not. It took until today
that I found out what was the problem and how to fix it.</p>
<p>I implemented a virtual users/domains system for Exim using several
different documentations and tutorials. Right now some parts of my
system include the documentation on</p>
<p><a class="reference external" href="http://www.tty1.net/virtual_domains_en.html">http://www.tty1.net/virtual_domains_en.html</a></p>
<p>Now the problem is that the userforward router is only working for
accounts whose $local_part is an existing system user. I came up with
the following additional router that solves the problem. Its written for
the MySQL table layout that is specified in the Tutorial above.</p>
<blockquote>
<div><div class="highlight-python"><pre>virtualuserforward:
  debug_print = &quot;R: virtualuserforward for $local_part@$domain&quot;
  driver = redirect
  domains = +local_domains
  file = ${lookup mysql{SELECT CONCAT(home,'.forward') AS forward FROM users \
        WHERE id='${quote_mysql:$local_part}@${quote_mysql:$domain}'}}
  no_verify
  no_expn
  check_ancestor
  directory_transport = address_directory
  file_transport = address_file
  pipe_transport = address_pipe
  reply_transport = address_reply
  allow_filter

  user = ${lookup mysql{SELECT uid FROM users \
        WHERE id='${quote_mysql:$local_part}@${quote_mysql:$domain}'}}
  group = ${lookup mysql{SELECT gid FROM users \
        WHERE id = '${quote_mysql:$local_part}@${quote_mysql:$domain}'}}</pre>
</div>
</div></blockquote>
<p>Now each virtual user is using the .forward file in its actual system
user account home directory. The next problem was: $home is not defined
in this case in the .forward file syntax: Its empty. So replacing $home
with its obvious path leads to the final solution.</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/06/14/exim4-and-virtual-users-forward-files.html#disqus_thread" data-disqus-identifier="2008/06/14/exim4-and-virtual-users-forward-files">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>June 25, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="multimediatreff-on-frameworks">
<a href="2008/06/25/multimediatreff-on-frameworks.html"><h1>Multimediatreff on Frameworks</h1></a>
<p>My neighbour gladly called my attention to the
<a class="reference external" href="http://www.multimediatreff.de">Multimediatreff</a>, a relaxed conference
that is held about three times a year, this last saturday on the topic:
Frameworks and Content-Management-Systems.</p>
<p>It was held in a very nice conference center in cologne, and from what I
heard about 200 people attended. The first two topics were on
<a class="reference external" href="http://www.joomla.org/">Joomla!</a> and bareer-free
<a class="reference external" href="http://www.typo3.org">Typo3</a>. Since I am more the framework guy, I
did not enjoy them too much. At least I got some input on how a
bareer-free website has to function. The Joomla! presentation supported
my prejudice, that programming in and for Joomla! produces ugly code.</p>
<p>I did like the presentations on frameworks, the most interesting being
the <a class="reference external" href="http://www.cakephp.org">CakePHP</a> presentation by <a class="reference external" href="http://teemow.com/">Timo
Derstappen</a>, since I havent looked into Cake for
about one and a half years. I have seen that with the new to come
version 2, the framework became even better, now supporting easy code
generation and flexible site generation. But its still somehow a Ruby
clone and forces me too much in my programming style.</p>
<p>The <a class="reference external" href="http://framework.zend.com">Zend Framework</a> presentation was done
by Carsten Möhrke, who also wrote the first german ZF Book. He showed
the creation of a blog using Zend Framework, being the Hello World
example for frameworks. He specifically showed, that you can use
anything you want as a model, a Zend_Db_Table object or any other
object. He also showed something like a Data-Mapper pattern in his
application. I got some ideas from this I propably will write about some
later time.</p>
<p>I also enjoyed the <a class="reference external" href="http://www.rubyonrails.de">Rails</a> presentation,
because I never got the chance to look the Ruby guys at work of the
shoulder. But this is even worse than CakePHP was my first observation.
I am no fan of ActiveRecord being forced upon you as Model
implementation.</p>
<p>The pizza battle, mysteriously announced by the host, was another
highlight, as well as the drinks and snacks in between. All in all I can
highly recommend the Multimediatreff for the next time.</p>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/06/25/multimediatreff-on-frameworks.html#disqus_thread" data-disqus-identifier="2008/06/25/multimediatreff-on-frameworks">Leave a comment</a>
        </div>
    </div><div class="separator post_separator"></div>
        
        <div class="timestamp postmeta">
            <span>June 22, 2008</span> 
        </div>
        <?xml version="1.0" ?><div class="section" id="zf-caching-pages-via-front-controller-plugin">
<a href="2008/06/22/zf-caching-pages-via-front-controller-plugin.html"><h1>ZF: Caching Pages via Front Controller Plugin</h1></a>
<p>Today I implemented caching using a front controller plugin (<a class="reference external" href="http://devzone.zend.com/article/3372">see
Matthews post on Zend Devzone</a>)
into the Whitewashing blog software via Zend_Cache and the Filesystem
Backend. I ran some superficial Apache Benachmark tests to have a look
at the gain change in performance.</p>
<p>First of all i used the complete Plugin from <a class="reference external" href="http://devzone.zend.com/article/3372">Matthews article on Zend
Devzone</a> and a missing function
getCache() in the code fragment:</p>
<blockquote>
<div><div class="highlight-python"><pre>public function getCache()
{
    if( ($response = $this-&gt;cache-&gt;load($this-&gt;key)) != false) {
        return $response;
    }
    return false;
}</pre>
</div>
</div></blockquote>
<p>I loaded the Plugin into the front controller and initialized it with a
Zend_Config_Ini object. This all works very smoothly and caching is
ready to begin.</p>
<p>Testing came to the result that with 1000 requests, 10 of them concurent
(ab -n 1000 -c 10), which I know is a rather unrealistic assumption for
this blog, the request time dropped by half, from six to three seconds
(still lot of time, but this isn’t the best webserver).</p>
<div class="section" id="results-without-caching">
<h2>Results without caching</h2>
<div class="highlight-python"><pre>Requests per second:    1.49 [#/sec] (mean)
Time per request:       6695.213 [ms] (mean)

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       26   30   4.0     30      43
Processing:  1556 6452 3372.1   5511   14768
Waiting:     1436 6129 3174.1   5145   14595
Total:       1583 6483 3373.2   5538   14810</pre>
</div>
</div>
<div class="section" id="results-with-caching">
<h2>Results with caching</h2>
<div class="highlight-python"><pre>Requests per second:    3.03 [#/sec] (mean)
Time per request:       3304.534 [ms] (mean)

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       26   31   6.3     30      73
Processing:   781 3214 1757.7   3103    7445
Waiting:      650 3055 1731.4   2928    7190
Total:        809 3245 1757.8   3135    7475</pre>
</div>
<p>As said before this testing is superficial, but its gives a broad sense
of what perfomance gain is possible with just some lines of code and a
temporary directory. Using memcache will probably speed up the process
another good amount.</p>
<p>Later I realized that complete page caching (rather than block element
caching) sucks when you inject admin area linkes into the navigation,
which would allow non-logged in users to see parts of the admin area so
I had to disable caching totally. You never know in the first place (you
should though). I have to rework my admin area or extend my
authentication or the caching plugin somehow. This will probably be the
topic another time.</p>
</div>
</div>
        
    <div class="postmeta">
        
        <div class="author">
            <span>Posted by beberlei <kontakt@beberlei.de></span>
        </div>
        
        
        
        <div class="comments">
            <a href="http://www.whitewashing.de/2008/06/22/zf-caching-pages-via-front-controller-plugin.html#disqus_thread" data-disqus-identifier="2008/06/22/zf-caching-pages-via-front-controller-plugin">Leave a comment</a>
        </div>
    </div>
    
    <div class="related">
        <ul>
            <li>
                 &laquo; <a href="page2.html">Newer</a>
            </li>
            <li class="right">
                <a href="page4.html">Older</a> &raquo; 
            </li>
        </ul>
    </div>
    <div class="archive_link">
        <a href="archive.html"> &mdash; Blog Archive &mdash; </a>
    </div>


            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'whitewashing';
                var disqus_url = 'http://www.whitewashing.de/page3.html';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>         
        </div>
      </div>
    </div>

    <div class="span-8 last">
        
          
            <div class="yui-b" id="sidebar">
              
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

<div class="widget">
    <h3>Recent Posts</h3>
    <ul>
        <li>
            <a href="2012/05/26/doctrine_goes_mit.html">Doctrine switches from LGPL to MIT</a>
        </li>
        <li>
            <a href="2012/02/25/symfony2_controller_testing.html">Symfony2 Controller Testing without Application</a>
        </li>
        <li>
            <a href="2010/02/07/resources-for-a-php-and-hudson-ci-integration.html">Resources for a PHP and Hudson CI Integration</a>
        </li>
        <li>
            <a href="2010/05/02/testing-database-locks-with-phpunit-and-gearman.html">Testing Database Locks with PHPUnit and Gearman</a>
        </li>
        <li>
            <a href="2010/01/08/immutable-datetime-objects.html">Immutable DateTime Objects</a>
        </li>
        <li>
            <a href="2010/01/10/application-lifecycle-management-and-deployment-with-pear-and-phar-revisited-update.html">Application Lifecycle Management and Deployment with PEAR and PHAR (revisited) UPDATE</a>
        </li>
        <li>
            <a href="2010/04/27/doctrine-2-beta-1-released.html">Doctrine 2 Beta 1 released</a>
        </li>
        <li>
            <a href="2010/04/18/new-netbeans-php-codesniffer-plugin-version.html">New Netbeans PHP CodeSniffer Plugin Version</a>
        </li>
        <li>
            <a href="2010/12/18/generate-proxy-code-using-a-stream-wrapper.html">Generate Proxy code using a stream wrapper</a>
        </li>
        <li>
            <a href="2010/12/07/blog-refactorings-with-symfony2-doctrine-2-and-zeta-components.html">Blog Refactorings with Symfony2, Doctrine 2 and Zeta Components</a>
        </li>
    </ul>
</div>

        </div>
      </div>
            </div> 
          
        
    </div>
</div>

      <div class="clearer"></div>
    </div>
<div class="container">
    <div class="span-24 content">
        <div class="footer">
            &copy; Copyright 2008-2012, Benjamin Eberlei.
            Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.

        <script type="text/javascript">    var disqus_shortname = "whitewashing";    disqus_count();</script>
        </div>
    </div>
</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32146757-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>